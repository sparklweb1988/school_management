{% extends 'dashboard/base.html' %} {% block content %}
<div class="container">
  <h1>Welcome: {{ user.username }}</h1>
  <h2>Subject Dashboard</h2>
  <br />

  <!-- Button to Add a New Subject -->
  {% if request.user.is_superuser or request.user.role == 'admin' or request.user.role == 'teacher' %}
  <td>
    <a href="{% url 'subject_create' %}" class="btn view">Add Subject</a>
  </td>
  {% endif %}

  <div class="table-wrapper">
    <table class="responsive-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Subject Name</th>
          <th>Description</th>
          <th>Assigned Teacher(s)</th>
          <!-- Added column for Teachers -->
          {% if request.user.is_superuser or request.user.role == 'admin' or request.user.role == 'teacher' %}
          <th>Actions</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% for sub in subject %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ sub.name }}</td>
          <td>{{ sub.description }}</td>

          <!-- Show teacher(s) assigned to the subject -->
          <td>
            {% if sub.teacher %} {% for teacher in sub.teacher.all %} {{
            teacher.user_profile}}<br />
            {% endfor %} {% else %} No teacher assigned {% endif %}
          </td>
          {% if request.user.is_superuser or request.user.role == 'admin' or request.user.role == 'teacher' %}
          <td class="actions">
            <!-- Links for View, Edit, Delete actions (these can be expanded with actual URLs) -->

            <a href="{% url 'subject_update' sub.id %}" class="btn edit">Edit</a>
            <a href="{% url 'delete_subject' sub.id %}" class="btn delete">Delete</a>
          </td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock content %}